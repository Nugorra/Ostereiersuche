<polymer-element name="oster-ei" attributes="name top left height width shown found foundimage" on-click="{{hide}}">
	<template>
		<style>
			:host(:not([shown])) .box {
				display: none;
			}
			
			:host(:not([found])) img {
				display: none;
			}
			
			.box {
				color: #fff;
				position: absolute;
				top: 0px;
				left: 0px;
				z-index: 10;
				padding: 10px;
				padding-bottom: 100px;
				background-color: #000;
				background-image: url('../../img/ostern/close.png');
				background-repeat: no-repeat;
				background-position: bottom center;
			}
			
			img {
				position: absolute;
				pointer-events: none;
			}
			
			.text {
				max-width: 70%;
				margin: auto;
			}
		</style>
		<template if="{{!name || top < 0 || left < 0 || height < 0 || width < 0}}">
			<strong>Error:</strong> There is an <code>oster-ei</code> in this <code>oster-bild</code> without the mandatory attributes
			<code>name</code>, <code>left</code>, <code>height</code>, and <code>width</code>.
		</template>
		<img id="kringel" src="{{foundimage}}">
		<div class="box">
			<div class="text">
				<content></content>
			</div>
		</div>
	</template>
	<script>
		Polymer('oster-ei', {
			top: -1, // hint type: number
			left: -1,
			height: -1,
			width: -1,
			shown: false,
			found: false,
			ready: function() {
				this.$.kringel.style.top = (this.top - 25 + this.height/2) + 'px';
				this.$.kringel.style.left = (this.left - 25 + this.width/2) + 'px';
			},
			handleClick: function(top, left) {
				if (top < this.top) return;
				if (top > this.top + this.height) return;
				if (left < this.left) return;
				if (left > this.left + this.width) return;
				this.show();
			},
			show: function() {
				this.shown = true;
				this.found = true;
				this.fire('show-ei');
			},
			hide: function(event) {
				this.shown = false;
				this.fire('hide-ei');
				event.stopPropagation();
			}
		});
	</script>
</polymer-element>