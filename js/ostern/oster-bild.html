<polymer-element name="oster-bild" attributes="name src active foundall" on-click="{{handleClickEvent}}" on-show-ei="{{handleShowEi}}">
	<template>
		<style>
			:host {
				position: relative;
				display: block;
				width: 600px;
			}
		</style>
		<template if="{{!name || !src}}">
			<strong>Error:</strong> There is an <code>oster-bild</code> without the mandatory attributes
			<code>name</code> and <code>src</code>.
		</template>
		<template if="{{active}}">
			<img src="{{src}}" alt="">
			<content selector="oster-ei"></content>
		</template>
	</template>
	<script>
		Polymer('oster-bild', {
			foundall: false,
			ready: function() {
				for (var i = 0; i < this.children.length; i++) {
					var image = '../../img/ostern/kringel_';
					switch (i % 5) {
					case 0:
						image += 'blau';
						break;
					case 1:
						image += 'gelb';
						break;
					case 2:
						image += 'gruen';
						break;
					case 3:
						image += 'rot';
						break;
					default:
						image += 'schwarz';
					}
					image += '.png';
					
					this.children[i].foundimage = image;
				}
			},
			handleClickEvent: function(event) {
				var coordinates = this.getBoundingClientRect();
				var left = event.clientX - Math.floor(coordinates.left);
			    var top = event.clientY - Math.floor(coordinates.top);
				for (var i = 0; i < this.children.length; i++) {
					this.children[i].handleClick(top, left);
				}
			},
			handleShowEi: function() {
				var totalEis = this.children.length;
				var foundEis = 0;
				for (var i = 0; i < totalEis; i++) {
					if (this.children[i].found) {
						foundEis++;
					}
				}
				if (foundEis == totalEis) {
					this.foundall = true;
					this.fire('foundall-bild');
				}
			}
		});
	</script>
</polymer-element>